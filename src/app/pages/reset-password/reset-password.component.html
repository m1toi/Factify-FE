<div class="login-wrapper">
  <img
    src="assets/avatars/factify_logo.png"
    alt="Factify logo"
    class="logo"
  />
  <h1 class="title">Reset Password</h1>

  <form [formGroup]="form" class="login-card" (ngSubmit)="onSubmit()">

    <!-- Inputs + button apar doar dacă resetarea nu e completă -->
    <ng-container *ngIf="!resetSuccessful">
      <input
        pInputText
        formControlName="newPassword"
        type="password"
        placeholder="New password"
      />
      <small *ngIf="submitted && form.get('newPassword')?.hasError('required')">
        Password is required
      </small>
      <small *ngIf="submitted && form.get('newPassword')?.hasError('minlength')">
        Password must be at least 6 characters
      </small>

      <input
        pInputText
        formControlName="confirmPassword"
        type="password"
        placeholder="Confirm password"
      />
      <small *ngIf="submitted && form.get('confirmPassword')?.hasError('required')">
        Confirmation is required
      </small>
      <small *ngIf="submitted && form.hasError('mismatch')">
        Passwords do not match
      </small>

      <button
        pButton
        class="login-button"
        type="submit"
        [disabled]="form.invalid"
      >
        <span pButtonLabel>Reset Password</span>
      </button>
    </ng-container>

    <!-- Mesajul de succes -->
    <div *ngIf="message" class="success-message">
      {{ message }}
    </div>

    <div class="create-account">
      <a [routerLink]="['/login']">&larr; Back to Login</a>
    </div>
  </form>
</div>
